#!/bin/bash


echo "Driver script for generating LPSDA KdV Data"
echo "usage: ./runner.sh NUM_NUMPY_THREADS" 

export MKL_NUM_THREADS=$1
export NUMEXPR_NUM_THREADS=$1
export OMP_NUM_THREADS=$1

# Parallelize accross 4 generation processes
deltas1=(2.3730684991589226 1.4552782898582335 3.324683049321477 4.2962590913617715 2.0778174204300583 3.3697821578339937 2.715493933711551 3.2881411892205783 1.0732166905381741 2.079377830528157 1.3125605863480712 1.886875922720071 3.0961831732417746 4.745895554569595 1.1716685086180618 2.4324446166958245 1.9799249406869992 1.1131127034550374 0.8231928919191301 4.039335456080972 4.425034388677493 2.1061257512057816 4.526293518820571 3.99529720419097 2.9954778834043756)
deltas2=(4.793000086921648 1.4551769854120513 3.773904826743391 1.6918242648487598 3.0039770128553993 1.3858742147385756 4.0977390378506575 0.9950917334239905 4.785319256464 1.2102228788268123 2.879743022467335 3.582593594286725 1.5763887132072136 4.558274871796125 1.6231280221604099 1.939665933450363 3.079323549264644 4.9449251337221725 4.224937999510304 1.1109875372831794 3.417852132675743 2.1657699525123375 2.7833026856801872 3.1573642297918845 2.5956722771059084)
deltas3=(3.8743745556079014 1.0439511711064378 0.8864548760423703 1.5636648622698228 2.6141690782968863 2.0270075238479164 1.6386298850651109 3.351688377986041 4.855654538913149 3.6737787113510594 0.9444317886839173 2.109186519575526 4.872255436611146 3.3111799110065574 0.9899546134242599 4.280697538438104 1.391881744894003 4.043428031045961 3.7688008441599923 2.3055560598859453 2.1897717043811267 3.864345949019869 1.3022958329408674 4.038062155809157 0.9067603323251998)
deltas4=(3.3143656336275535 4.437939812254728 4.873621379080376 1.5702989413844222 2.0231623888317762 2.338719741833505 2.959784641337169 1.5162013194866244 4.1952688620891365 2.6486404737063256 4.619145688730885 2.9842856889468052 4.055557858116681 4.671871787097091 2.1663873892057106 2.298363972113075 4.169227319166967 1.6346058624435242 3.861830105772147 1.2866500500055449 1.0669450712012993 3.4777413796918957 3.7956281063365793 2.873941504730441 1.2531439933718787)

for i in "${!deltas1[@]}"; do
    python generate/generate_data.py --experiment KdV \
    --end_time 100 \
    --train_samples 10 \
    --valid_samples 4 \
    --delta "${deltas1[$i]}" \
    --seed 42 &

    python generate/generate_data.py --experiment KdV \
    --end_time 100 \
    --train_samples 10 \
    --valid_samples 4 \
    --delta "${deltas2[$i]}" \
    --seed 42 &

    python generate/generate_data.py --experiment KdV \
    --end_time 100 \
    --train_samples 10 \
    --valid_samples 4 \
    --delta "${deltas3[$i]}" \
    --seed 42 &

    python generate/generate_data.py --experiment KdV \
    --end_time 100 \
    --train_samples 10 \
    --valid_samples 4 \
    --delta "${deltas4[$i]}" \
    --seed 42 &

    wait

done


